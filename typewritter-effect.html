<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- 引用有字库站酷高端黑字体 -->
    <link
      href="http://cdn.repository.webfont.com/webfonts/nomal/135621/46969/5e3024eaf629d810708c2ad6.css"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "huxiaobo-gdh1e91397a5f211c5", "PingFang SC",
          "Microsoft Yahei", sans-serif;
      }

      main {
        background: #2f3542;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }

      h1 {
        color: #f1f2f6;
        font-size: 5em;
        font-weight: 300;
      }

      span.mark {
        border-right: 2px solid white;
        animation: blink 0.6s step-end infinite;
      }

      @keyframes blink {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: white;
        }
      }
      body .socials {
        position: fixed;
        display: block;
        left: 20px;
        bottom: 20px;
      }
      body .socials > a {
        display: block;
        width: 30px;
        opacity: 0.2;
        transform: scale(var(--scale, 0.8));
        transition: transform 0.3s cubic-bezier(0.38, -0.12, 0.24, 1.91);
      }
      body .socials > a:hover {
        --scale: 1;
      }
    </style>
  </head>
  <body>
    <!-- 定位文本到浏览器中央 -->
    <main>
      <!-- 文字容器，统一由h1控制 -->
      <h1>
        <!-- 使用span显示文字, data-text为Json格式的数组 -->
        <span
          id="text"
          data-text='["我是KANO", "我是前端工程师", "我热爱前端开发"]'
        ></span>
        <!-- 闪烁的光标 -->
        <span class="mark"></span>
      </h1>
    </main>
    <!--- ## CODEPEN + TWITTER ############# -->
    <div class="socials">
      <a class="dribbble" href="https://codepen.io/virkano" target="_blank">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="30"
          height="30"
          viewBox="0 0 32 32"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            fill="black"
            d="M16 0C7.16703 0 0 7.16703 0 16C0 24.833 7.16703 32 16 32C24.8156 32 32 24.833 32 16C32 7.16703 24.8156 0 16 0ZM26.5683 7.37527C28.4772 9.70065 29.6226 12.6681 29.6573 15.8785C29.2061 15.7918 24.6941 14.872 20.1475 15.4447C20.0434 15.2191 19.9566 14.9761 19.8525 14.7332C19.5748 14.0738 19.2625 13.397 18.9501 12.7549C23.9826 10.7072 26.2733 7.75705 26.5683 7.37527ZM16 2.36009C19.4707 2.36009 22.6464 3.66161 25.0586 5.7961C24.8156 6.14317 22.7505 8.90239 17.8915 10.7245C15.6529 6.61171 13.1714 3.24512 12.7896 2.72451C13.8134 2.48156 14.8894 2.36009 16 2.36009ZM10.1866 3.64425C10.551 4.13015 12.9805 7.5141 15.2538 11.5401C8.86768 13.2408 3.22777 13.2061 2.62039 13.2061C3.50542 8.9718 6.36876 5.44902 10.1866 3.64425ZM2.32538 16.0174C2.32538 15.8785 2.32538 15.7397 2.32538 15.6009C2.9154 15.6182 9.54447 15.705 16.3644 13.6573C16.7636 14.4208 17.128 15.2017 17.4751 15.9826C17.3015 16.0347 17.1106 16.0868 16.9371 16.1388C9.89154 18.4121 6.14317 24.6247 5.8308 25.1453C3.6616 22.7332 2.32538 19.5228 2.32538 16.0174ZM16 29.6746C12.8416 29.6746 9.92625 28.5987 7.61822 26.7939C7.86117 26.2907 10.6377 20.9458 18.3427 18.256C18.3774 18.2386 18.3948 18.2386 18.4295 18.2213C20.3557 23.2017 21.1367 27.3839 21.3449 28.5813C19.6963 29.2928 17.8915 29.6746 16 29.6746ZM23.6182 27.3319C23.4794 26.4989 22.7505 22.5076 20.9631 17.5965C25.2495 16.9197 28.9978 18.0304 29.4664 18.1866C28.8764 21.987 26.6898 25.2668 23.6182 27.3319Z"
            fill="#EA4C89"
          ></path>
          </svg>
        </a>
      <a class="twitter" href="https://twitter.com/kanozhao" target="_blank">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="30"
          height="30"
          viewBox="0 0 72 72"
        >
          <path
            fill="black"
            d="M67.812 16.141a26.246 26.246 0 0 1-7.519 2.06 13.134 13.134 0 0 0 5.756-7.244 26.127 26.127 0 0 1-8.313 3.176A13.075 13.075 0 0 0 48.182 10c-7.229 0-13.092 5.861-13.092 13.093 0 1.026.118 2.021.338 2.981-10.885-.548-20.528-5.757-26.987-13.679a13.048 13.048 0 0 0-1.771 6.581c0 4.542 2.312 8.551 5.824 10.898a13.048 13.048 0 0 1-5.93-1.638c-.002.055-.002.11-.002.162 0 6.345 4.513 11.638 10.504 12.84a13.177 13.177 0 0 1-3.449.457c-.846 0-1.667-.078-2.465-.231 1.667 5.2 6.499 8.986 12.23 9.09a26.276 26.276 0 0 1-16.26 5.606A26.21 26.21 0 0 1 4 55.976a37.036 37.036 0 0 0 20.067 5.882c24.083 0 37.251-19.949 37.251-37.249 0-.566-.014-1.134-.039-1.694a26.597 26.597 0 0 0 6.533-6.774z"
          >
        </path>
        </svg>
      </a>
    </div>

    <script>
      // 获取显示文字的span元素
      const textEl = document.querySelector("#text");
      // 获取并解析要展示的文本数组
      const texts = JSON.parse(textEl.getAttribute("data-text"));

      // 当前显示文本数组中的第几个
      let index = 0;
      // 当前显示第几个字
      let charIndex = 0;
      // 每个字显示间隔默认是500毫秒
      let delta = 500;

      // 记录动画执行开始时间
      let start = null;
      // 是否为删除动画
      let isDeleting = false;

      // 动画回调函数
      function type(time) {
        window.requestAnimationFrame(type);
        // 初始化开始时间
        if (!start) start = time;
        // 获取时间间隔
        let progress = time - start;
        // 每隔一定的时间，打印出一个新的字符
        if (progress > delta) {
          // 获取完整的字符
          let text = texts[index];
          // 如果是打字效果
          if (!isDeleting) {
            // 给展示文字的span新增一个字符，使用innerHTML来替换，charIndex自增1，然后返回新的字符串子串
            textEl.innerHTML = text.slice(0, ++charIndex);
            // 每个字符打印出来的速度不一样，模仿人工打字的速度
            delta = 500 - Math.random() * 400;
          } else {
            // 如果是删除效果，则把文字一个一个减掉
            textEl.innerHTML = text.slice(0, charIndex--);
          }
          // 把star更新为当前时间，进行下一个周期
          start = time;

          // 如果文字已经全部打印完毕
          if (charIndex === text.length) {
            // 下次开始删除文字
            isDeleting = true;
            // 删除文字的间隔为200毫秒
            delta = 200;
            // 额外等待1.2秒后再删除
            start = time + 1200;
          }

          // 如果文字删除完毕
          if (charIndex < 0) {
            isDeleting = false;
            // 额外增加200毫秒延迟
            start = time + 200;
            // 把index移动到下一个文本，并且在文本数组元素个数中循环
            index = ++index % texts.length;
          }
        }
      }

      window.requestAnimationFrame(type);
    </script>
  </body>
</html>
